!function(e){function t(r){if(a[r])return a[r].exports;var i=a[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=(new Date).getFullYear();t.COPYRIGHT_YEAR=r;t.FULLTITLE="ES-DOC Dataset Errata";t.LONG_NAME="Dataset Errata";t.NAME="Errata";t.ORGANIZATION="ES-DOC";t.VERSION="0.5.2.0";const i=_.extend({},Backbone.Events);t.events=i;const s=e=>{console.log(new Date+" :: ES-DOC-"+"Errata".toUpperCase()+" :: "+e)};t.log=s;t.on=((e,t,a)=>{i.on(e,t,a)});t.trigger=((e,t)=>(s("event :: "+e),i.trigger(e,t)))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=a(2);const s=(e,t)=>{!0===t?window.open(e):window.location=e};t.openURL=s;t.openHomepage=(()=>{s(i.URLS.HOME_PAGE,!0)});const n=(e,t,a)=>{var r="mailto:{0}?subject={1}&body={2}";t=t||i.EMAIL.SUBJECT,a=a||i.EMAIL.MESSAGE,r=(r=(r=r.replace("{0}",e)).replace("{1}",t)).replace("{2}",a),window.location.href=r};t.openEmail=n;t.openSupportEmail=(()=>{var e;e=(e=(e="ES-DOC :: SUPPORT :: {0} (v{1})").replace("{0}",r.NAME.toUpperCase())).replace("{1}",r.VERSION),n(i.EMAIL.SUPPORT,e)});t.render=((e,t,a)=>{var r,i,s=[];return r=_.isArray(e)?e:[e],_.each(r,function(e){i=new e(t).render(),s.push(i),_.isUndefined(a)||(_.has(a,"$el")?a.$el.append(i.$el):a.append(i.$el))},this),1===r.length?s[0]:s});t.renderHTML=((e,t,a)=>{var r=t?e(t):e();_.isUndefined(a)||(_.has(a,"$el")?a.$el.append(r):a.append(r))});const o={};t.renderTemplate=((e,t,a)=>{var r,i;if(_.has(o,e)||(o[e]=_.template($("#"+e).html())),r=o[e],i=r(t),a&&a.$el)a.$el.append(i);else{if(!a)return i;a.replaceWith(i)}});t.getURLParam=((e,t)=>{var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return a?(a[1]||t).toUpperCase():t});const c=function(e,t){var a=0;return t&&t/e>(a=parseInt(t/e,10))&&(a+=1),a};t.getPageCount=c;t.getPages=((e,t)=>_.map(_.range(c(e,t.length)),function(t){return{id:t+1,data:this.slice(t*e,(t+1)*e-1)}},t));t.displayFeedback=(e=>{$("#feedbackText").text(e+" ... please wait"),$(".feedback-title").text(r.FULLTITLE),$(".feedback-version").text("v"+r.VERSION),$("#feedbackContainer").modal({backdrop:"static",keyboard:!1,show:!0})});t.hideFeedback=(()=>{$("#feedbackContainer").modal("hide")})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(6),i=a(4),s=a(7);const n=r;t.EMAIL=n;const o=i;t.MISC=o;const c=s;t.URLS=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"filters",function(){return n}),a.d(t,"searchData",function(){return l});var r=a(0),i=a(1),s=a(8),n=[];const o={current:null,count:0,pages:[],pageSize:25,pageSizeOptions:[25,50,100]};t.paging=o;const c={field:"dateCreated",direction:"desc"};t.sorting=c;var l=null;t.setSearchData=(e=>{l=_.defaults({results:_.map(e.results,e=>new s.b(e,n))},e),g(),p()});t.initFilters=(e=>{n=_.map(e,function(e){return new s.a(e)}),d()});const d=()=>{_.each(n,e=>{e.isActive=_.isNull(e.project)||e.project===n[0].data.current.key.split(":")[3]})};t.setActiveFilters=d;t.getActiveFilters=(()=>_.filter(n,e=>e.isActive));t.updateFilter=((e,t)=>{var a;(a=_.find(n,t=>t.key===e)).data.current=_.find(a.data.all,e=>e.key===t),"esdoc:errata:project"===a.key&&d(),r.trigger("state:filterUpdated",a)});const p=()=>{o.pages=i.getPages(o.pageSize,l.results),o.count=o.pages.length,o.current=o.count>0?o.pages[0]:void 0};t.paginateIssues=p;const g=()=>{var e,t,a;"title"===(t=c.field)?a=(e=>e.title):"institutionID"===t?a=(e=>e.ext.institutionID):"status"===t?a=(e=>e.ext.status.label.toLowerCase()):"severity"===t?a=(e=>e.ext.severity.sortOrdinal):_.contains(["dateClosed","dateCreated","dateUpdated"],t)&&(a=(e=>e[t]?e[t].valueOf():"--")),e=_.sortBy(l.results,a),"desc"===c.direction&&(e=e.reverse()),l.results=e};t.sortResults=g;t.updateSortField=(e=>{c.field===e?(c.direction="asc"===c.direction?"desc":"asc",r.trigger("state:sortDirectionToggled")):(r.trigger("state:sortFieldChanging"),c.field=e,_.contains(["dateClosed","dateCreated","dateUpdated","severity"],e)?c.direction="desc":c.direction="asc",r.trigger("state:sortFieldChanged")),g(),p()})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=window.location.host&&window.location.host.indexOf("es-doc.org")>=0?window.location.host.indexOf("test")>=0?"test":"prod":"dev";t.EXECUTION_MODE=r;t.LOGGING_PREFIX="ES-DOC-ERRATA :: ";t.NULL_FIELD="--";t.UI_UPDATE_DELAY=1e3},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=a(1),s=a(2),n=a(3),o=a(9);a(10),a(11);$(document).ready(()=>{r.trigger("setup:begin")}),r.events.on("setup:complete",()=>{var e;(e=new o.a).render(),$("body").append(e.el),r.log("ui initialized"),r.trigger("ui:initialized")}),window.APP=r,window.STATE=n,window.UTILS=i,window.CONSTANTS=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONTACT="errata-contact@list.woc.noaa.gov";t.SUPPORT="errata-support@list.woc.noaa.gov";t.SUBJECT="ES-DOC ERRATA :: subject goes here";t.MESSAGE="Dear ES-DOC ERRATA support team,"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(4);const i={dev:"http://localhost:5001",prod:"https://errata-api.es-doc.org",test:"https://test-errata-api.es-doc.org"}[r.EXECUTION_MODE];t.API_BASE_URL=i;t.HOME_PAGE="https://es-doc.org";t.PID_PAGE="pid.html";t.PID_RESOLVE="/1/resolve/pid";t.PID_TASK_QUEUE_SEARCH="/1/pid-queue/search";t.PID_TASK_QUEUE_SEARCH_SETUP="/1/pid-queue/search-setup";t.RETRIEVE="/1/issue/retrieve";t.SEARCH="/1/issue/search";t.SEARCH_PAGE="index.html";t.SEARCH_SETUP="/1/issue/search-setup";const s={dev:window.location.href.replace("index","viewer").replace("pidq","viewer"),prod:"https://errata.es-doc.org/viewer.html",test:"https://test-errata.es-doc.org/viewer.html"}[r.EXECUTION_MODE];t.VIEWER_BASE_URL=s},function(e,t,a){"use strict";t.a=class{constructor(e){this.data={all:_.sortBy(e.terms,e=>e.sortOrdinal||e.key),current:null,set:{}},this.defaultKey="esdoc:errata:project"===e.key?"esdoc:errata:project:cmip6":null,this.key=e.key,this.label=e.label,this.project=e.key.startsWith("esdoc")?null:e.key.split(":")[1],this.uiPosition="esdoc:errata:project"===e.key?0:"esdoc:errata:severity"===e.key?1e3:"esdoc:errata:status"===e.key?1001:100,"esdoc:errata:project"!==e.key&&this.data.all.unshift({key:this.key+":*",label:"*"}),this.defaultKey&&(this.data.current=_.find(this.data.all,e=>e.key===this.defaultKey)),this.data.current=this.data.current||this.data.all[0],this.data.set=_.indexBy(this.data.all,"key")}};t.b=class{constructor(e,t){this.project=e[0],this.institutionID=e[1],this.uid=e[2],this.title=e[3],this.severity=e[4],this.status=e[5],this.dateCreated=e[6],this.dateClosed=e[7],this.dateUpdated=e[8],this.ext=new class{constructor(e,t){this.severity=t[1].data.set["esdoc:errata:severity:"+e.severity],this.status=t[2].data.set["esdoc:errata:status:"+e.status],this.institutionID=e.institutionID.toUpperCase(),this.title=(e.title||"--").trim(),e.title.length>53&&(this.title=e.title.slice(0,53)+" ...")}}(this,t)}}},function(e,t,a){"use strict";var r=a(0),i=a(1),s=a(2),n=a(3);t.a=Backbone.View.extend({events:{"click img.esdoc-logo":()=>{i.openHomepage()},"click button.esdoc-support":()=>{i.openSupportEmail()},"click button.esdoc-pid-lookup":()=>{i.openURL(s.URLS.PID_PAGE,!0)},"click .issue":e=>{var t;t=s.URLS.VIEWER_BASE_URL,t+="?uid=",t+=$(e.target).parent().attr("id")||$(e.target).parent().parent().attr("id"),i.openURL(t,!0)},"change .filter select":e=>{r.trigger("state:filterUpdate",$(e.target).val())},"change .pagination-info":e=>{var t;t=parseInt($(e.target).val(),10),$(e.target).val(""),!1===_.isNaN(t)&&t>0&&t<=n.paging.pages.length&&n.paging.current!==n.paging.pages[t-1]&&(n.paging.current=n.paging.pages[t-1],r.trigger("state:pageUpdate"))},"click .pagination-first":()=>{n.paging.pages.length&&n.paging.current!==_.first(n.paging.pages)&&(n.paging.current=_.first(n.paging.pages),r.trigger("state:pageUpdate"))},"click .pagination-previous":()=>{n.paging.pages.length&&n.paging.current!==_.first(n.paging.pages)&&(n.paging.current=n.paging.pages[n.paging.current.id-2],r.trigger("state:pageUpdate"))},"click .pagination-next":()=>{n.paging.pages.length&&n.paging.current!==_.last(n.paging.pages)&&(n.paging.current=n.paging.pages[n.paging.current.id],r.trigger("state:pageUpdate"))},"click .pagination-last":()=>{n.paging.pages.length&&n.paging.current!==_.last(n.paging.pages)&&(n.paging.current=_.last(n.paging.pages),r.trigger("state:pageUpdate"))},"change .pagination-page-size":e=>{n.paging.pageSize=$(e.target).val(),n.paging.pages=i.getPages(n.paging.pageSize,n.searchData.results),n.paging.count=n.paging.pages.length,n.paging.current=n.paging.count>0?n.paging.pages[0]:void 0,r.trigger("state:pageUpdate")},"click .sort-target":e=>{var t;(t=$(e.target).attr("class"))&&(t=t.split(" "),t=(t=_.find(t,e=>e.startsWith("sort-target-"))).slice(12)),t&&(n.updateSortField(t),r.trigger("state:pageUpdate"))}},initialize:function(){r.on("ui:initialized",this._setSortColumn,this),r.on("search:complete",this._updateStatisticsInfo,this),r.on("state:pageUpdate",this._updateGrid,this),r.on("state:pageUpdate",this._updateGridPager,this),r.on("state:sortFieldChanging",this._clearSortColumn,this),r.on("state:sortFieldChanged",this._setSortColumn,this),r.on("state:sortDirectionToggled",this._toggleSortColumn,this),r.on("project:changed",()=>{this._replaceNode("div.filter","template-filter")},this)},render:function(){return _.each(["template-header","template-filter","template-grid"],e=>{i.renderTemplate(e,null,this)},this),this},_setSortColumn:function(){"asc"===n.sorting.direction?this.$(".glyphicon.sort-target-"+n.sorting.field).addClass("glyphicon-menu-up"):this.$(".glyphicon.sort-target-"+n.sorting.field).addClass("glyphicon-menu-down")},_toggleSortColumn:function(){this._clearSortColumn(),this._setSortColumn()},_clearSortColumn:function(){this.$(".glyphicon.sort-target-"+n.sorting.field).removeClass("glyphicon-menu-up"),this.$(".glyphicon.sort-target-"+n.sorting.field).removeClass("glyphicon-menu-down")},_updateGrid:function(){this._replaceNode("tbody","template-grid-body")},_updateGridPager:function(){var e;e="Page ",e+=n.paging.current?n.paging.current.id:"0",e+=" of ",e+=n.paging.count,this.$(".pagination-info").attr("placeholder",e),this.$(".pagination-container").removeClass("hidden"),n.paging.count<2&&n.searchData.count<25&&this.$(".pagination-container").addClass("hidden")},_updateStatisticsInfo:function(){this._replaceNode("#grid-header-summary","template-grid-header-summary"),this._replaceNode("#grid-footer-summary","template-grid-footer-summary")},_replaceNode:function(e,t){this.$(e).replaceWith(i.renderTemplate(t))}})},function(e,t,a){"use strict";var r=a(0),i=a(2),s=a(3);r.on("setup:begin",()=>{var e;e=i.URLS.API_BASE_URL+i.URLS.SEARCH_SETUP,$.get(e).done(e=>{r.trigger("setup:setupDataDownload",e)}).fail(()=>{setTimeout(()=>{r.trigger("setup:setupDataDownload:error")},i.MISC.UI_UPDATE_DELAY)})}),r.on("setup:setupDataDownload",e=>{s.initFilters(e.vocabs),n(null,"setup:initialSearchDataDownload")}),r.on("state:filterUpdated",e=>{n("search:begin","search:dataDownload"),"esdoc:errata:project"===e.key&&r.trigger("project:changed")}),r.on("state:filterUpdate",e=>{s.updateFilter(e.split(":").slice(0,3).join(":"),e)}),r.on("setup:initialSearchDataDownload",e=>{s.setSearchData(e),r.trigger("setup:complete")}),r.on("search:dataDownload",e=>{s.setSearchData(e),r.trigger("state:pageUpdate"),r.trigger("search:complete")});const n=(e,t)=>{var a,n;!1===_.isNull(e)&&r.trigger(e),a=i.URLS.API_BASE_URL+i.URLS.SEARCH,n=[],_.each(_.values(s.getActiveFilters()),e=>{!1===e.data.current.key.endsWith("*")&&n.push(e.data.current.key)}),n={criteria:n.join(",")},r.trigger(t+"ing"),$.get(a,n).done(e=>{setTimeout(()=>{r.trigger(t,e)},i.MISC.UI_UPDATE_DELAY)}).fail(()=>{setTimeout(()=>{r.trigger(t+":error")},i.MISC.UI_UPDATE_DELAY)})}},function(e,t,a){"use strict";var r=a(0),i=a(1);r.on("setup:begin",()=>{i.displayFeedback("Initializing errata search",r.FULLTITLE,r.VERSION)}),r.on("setup:complete",i.hideFeedback),r.on("setup:setupDataDownload:error",()=>{alert("setup:setupDataDownload:error")}),r.on("search:begin",()=>{i.displayFeedback("Searching errata repository",r.FULLTITLE,r.VERSION)}),r.on("search:complete",i.hideFeedback),r.on("search:dataDownload:error",()=>{alert("search:dataDownload:error")})}]);