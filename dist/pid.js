!function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=(new Date).getFullYear();t.COPYRIGHT_YEAR=i;t.FULLTITLE="ES-DOC Dataset Errata";t.LONG_NAME="Dataset Errata";t.NAME="Errata";t.ORGANIZATION="ES-DOC";t.VERSION="0.5.2.0";const a=_.extend({},Backbone.Events);t.events=a;const n=e=>{console.log(new Date+" :: ES-DOC-"+"Errata".toUpperCase()+" :: "+e)};t.log=n;t.on=((e,t,r)=>{a.on(e,t,r)});t.trigger=((e,t)=>(n("event :: "+e),a.trigger(e,t)))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=r(2);const n=(e,t)=>{!0===t?window.open(e):window.location=e};t.openURL=n;t.openHomepage=(()=>{n(a.URLS.HOME_PAGE,!0)});const o=(e,t,r)=>{var i="mailto:{0}?subject={1}&body={2}";t=t||a.EMAIL.SUBJECT,r=r||a.EMAIL.MESSAGE,i=(i=(i=i.replace("{0}",e)).replace("{1}",t)).replace("{2}",r),window.location.href=i};t.openEmail=o;t.openSupportEmail=(()=>{var e;e=(e=(e="ES-DOC :: SUPPORT :: {0} (v{1})").replace("{0}",i.NAME.toUpperCase())).replace("{1}",i.VERSION),o(a.EMAIL.SUPPORT,e)});t.render=((e,t,r)=>{var i,a,n=[];return i=_.isArray(e)?e:[e],_.each(i,function(e){a=new e(t).render(),n.push(a),_.isUndefined(r)||(_.has(r,"$el")?r.$el.append(a.$el):r.append(a.$el))},this),1===i.length?n[0]:n});t.renderHTML=((e,t,r)=>{var i=t?e(t):e();_.isUndefined(r)||(_.has(r,"$el")?r.$el.append(i):r.append(i))});const s={};t.renderTemplate=((e,t,r)=>{var i,a;if(_.has(s,e)||(s[e]=_.template($("#"+e).html())),i=s[e],a=i(t),r&&r.$el)r.$el.append(a);else{if(!r)return a;r.replaceWith(a)}});t.getURLParam=((e,t)=>{var r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return r?(r[1]||t).toUpperCase():t});const c=function(e,t){var r=0;return t&&t/e>(r=parseInt(t/e,10))&&(r+=1),r};t.getPageCount=c;t.getPages=((e,t)=>_.map(_.range(c(e,t.length)),function(t){return{id:t+1,data:this.slice(t*e,(t+1)*e-1)}},t));t.displayFeedback=(e=>{$("#feedbackText").text(e+" ... please wait"),$(".feedback-title").text(i.FULLTITLE),$(".feedback-version").text("v"+i.VERSION),$("#feedbackContainer").modal({backdrop:"static",keyboard:!1,show:!0})});t.hideFeedback=(()=>{$("#feedbackContainer").modal("hide")})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),a=r(4),n=r(7);const o=i;t.EMAIL=o;const s=a;t.MISC=s;const c=n;t.URLS=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"errata",function(){return a}),r.d(t,"pids",function(){return n});var i=r(8),a=[],n=[];t.setErrata=(e=>{a=_.map(e,e=>new i.a(e))});t.setPIDs=(e=>{n=e})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=window.location.host&&window.location.host.indexOf("es-doc.org")>=0?window.location.host.indexOf("test")>=0?"test":"prod":"dev";t.EXECUTION_MODE=i;t.LOGGING_PREFIX="ES-DOC-ERRATA :: ";t.NULL_FIELD="--";t.UI_UPDATE_DELAY=1e3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=r(1),n=r(2),o=r(3),s=r(9);r(10),r(11);$(document).ready(()=>{i.trigger("setup:begin"),i.trigger("setup:complete")}),i.events.on("setup:complete",()=>{var e;(e=new s.a).render(),$("body").append(e.el),i.log("ui initialized"),i.trigger("ui:initialized")}),window.APP=i,window.STATE=o,window.UTILS=a,window.CONSTANTS=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONTACT="errata-contact@list.woc.noaa.gov";t.SUPPORT="errata-support@list.woc.noaa.gov";t.SUBJECT="ES-DOC ERRATA :: subject goes here";t.MESSAGE="Dear ES-DOC ERRATA support team,"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(4);const a={dev:"http://localhost:5001",prod:"https://errata-api.es-doc.org",test:"https://test-errata-api.es-doc.org"}[i.EXECUTION_MODE];t.API_BASE_URL=a;t.HOME_PAGE="https://es-doc.org";t.PID_PAGE="pid.html";t.PID_RESOLVE="/1/resolve/pid";t.PID_TASK_QUEUE_SEARCH="/1/pid-queue/search";t.PID_TASK_QUEUE_SEARCH_SETUP="/1/pid-queue/search-setup";t.RETRIEVE="/1/issue/retrieve";t.SEARCH="/1/issue/search";t.SEARCH_PAGE="index.html";t.SEARCH_SETUP="/1/issue/search-setup";const n={dev:window.location.href.replace("index","viewer").replace("pidq","viewer"),prod:"https://errata.es-doc.org/viewer.html",test:"https://test-errata.es-doc.org/viewer.html"}[i.EXECUTION_MODE];t.VIEWER_BASE_URL=n},function(e,t,r){"use strict";t.a=class{constructor(e){this.handle=e[0],this.issues=_.map(e[1],e=>new class{constructor(e){this.artefact=e[1]+"#"+e[2],this.sortOrdinal=e[3],this.uid=e[0],this.is_first=e[4],this.is_latest=e[5],this.unchanged_file=e[6]}}(e))}}},function(e,t,r){"use strict";var i=r(0),a=r(1),n=r(2),o=r(3);t.a=Backbone.View.extend({events:{"click img.esdoc-logo":()=>{a.openHomepage()},"click button.esdoc-support":()=>{a.openSupportEmail()},"click button.esdoc-errata-search":()=>{a.openURL(n.URLS.SEARCH_PAGE,!1)},"change .btn-file :file":e=>{var t,r;t=$("#file-selector")[0].files[0],(r=new FileReader).onload=function(e){e.target.result.trim()&&i.trigger("ui:pidFileSelected",{file:t,pids:e.target.result.trim().split("\n")})},r.readAsText(t)},"change #pid-data":e=>{var t;(t=$(e.target).val().trim())?o.setPIDs([t]):o.setPIDs([])},"click #searchButton":e=>{o.pids.length&&i.trigger("ui:search")},"click #issueButton":e=>{var t,r;(t=$(e.target).attr("title"))&&(r=window.location.href.replace("pid","viewer"),r+="?uid=",r+=t,a.openURL(r,!0))}},initialize:function(){i.events.on("ui:pidFileSelected",this._setPIDList,this),i.events.on("search:complete",this._updateGrid,this),this.isFirstGridRender=!0},render:function(){return _.each(["template-header","template-filter"],function(e){a.renderTemplate(e,i,this)},this),this},_replaceNode:function(e,t){this.$(e).replaceWith(a.renderTemplate(t,o))},_setPIDList:function(e){o.setPIDs(e.pids),$("#pid-data").val("file://"+e.file.name)},_updateGrid:function(){this.isFirstGridRender||this.$("table").remove(),a.renderTemplate("template-grid",i,this),this.isFirstGridRender=!1}}),window.APP=i,window.STATE=o,window.UTILS=a,window.CONSTANTS=n},function(e,t,r){"use strict";var i=r(0),a=r(2),n=(r(1),r(3));i.on("ui:search",()=>{var e,t;i.trigger("search:begin"),e=a.URLS.API_BASE_URL+a.URLS.PID_RESOLVE,t={pids:n.pids.join(",")},i.trigger("search:dataDownloading"),$.get(e,t).done(e=>{setTimeout(()=>{i.trigger("search:dataDownload",e)},a.MISC.UI_UPDATE_DELAY)}).fail(e=>{setTimeout(()=>{i.trigger("search:dataDownload:error",e)},a.MISC.UI_UPDATE_DELAY)})}),i.on("search:dataDownload",e=>{n.setErrata(e.errata),i.trigger("search:complete")})},function(e,t,r){"use strict";var i=r(0),a=r(1);i.on("setup:begin",()=>{a.displayFeedback("Initializing errata PID Lookup")}),i.on("setup:complete",a.hideFeedback),i.on("setup:setupDataDownload:error",()=>{alert("setup:setupDataDownload:error")}),i.on("search:begin",()=>{a.displayFeedback("Searching PID handle service")}),i.on("search:complete",a.hideFeedback),i.on("search:dataDownload:error",()=>{alert("An error occurred whilst calling the PID handle service")})}]);